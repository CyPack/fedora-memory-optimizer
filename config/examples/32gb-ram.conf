# ═══════════════════════════════════════════════════════════════════════════════
# FEDORA MEMORY OPTIMIZER v4.0 - 32GB RAM SYSTEMS
# ═══════════════════════════════════════════════════════════════════════════════
#
# Target: Developer workstations, gaming rigs, content creation
# Typical usage: Heavy IDEs + Docker + VMs + browser + everything else
#
# Copy this file into memory-optimizer-v4.sh or pass as environment variable.
#
# ═══════════════════════════════════════════════════════════════════════════════

# RAM Tier: T32
RAM_TIER="T32"

#───────────────────────────────────────────────────────────────────────────────
# ZRAM (Compressed RAM-based swap)
#───────────────────────────────────────────────────────────────────────────────
ZRAM_SIZE="16G"                    # 50% of RAM
ZRAM_ALGORITHM="zstd"              # Best compression
ZRAM_PRIORITY=100                  # High priority

# Effective capacity: ~64GB (with 4x compression)

#───────────────────────────────────────────────────────────────────────────────
# SWAPFILE (NVMe/SSD overflow)
#───────────────────────────────────────────────────────────────────────────────
SWAPFILE_SIZE="64G"                # RAM × 2
SWAPFILE_PRIORITY=10               # Lower than zram

# Total swap capacity: ~128GB (zram effective + swapfile)

#───────────────────────────────────────────────────────────────────────────────
# USER SESSION LIMITS (NEVER-KILL MODE)
#───────────────────────────────────────────────────────────────────────────────
USER_MEMORY_HIGH="24G"             # Soft limit - throttle starts
# USER_MEMORY_MAX not set!         # No hard limit = No kill

#───────────────────────────────────────────────────────────────────────────────
# KERNEL PARAMETERS
#───────────────────────────────────────────────────────────────────────────────
VM_SWAPPINESS=180                  # Aggressive zram usage
VM_PAGE_CLUSTER=0                  # Optimal for zram
VM_VFS_CACHE_PRESSURE=50           # Cache protection
VM_MIN_FREE_KBYTES=524288          # 512MB minimum free

#───────────────────────────────────────────────────────────────────────────────
# SYSTEMD-OOMD (Passive Mode)
#───────────────────────────────────────────────────────────────────────────────
OOMD_SWAP_USED_LIMIT="95%"         # Very high - practically never triggers
OOMD_MEMORY_PRESSURE_LIMIT="90%"   # Very high - practically never triggers
OOMD_PRESSURE_DURATION="60s"       # Long duration
